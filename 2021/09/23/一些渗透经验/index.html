<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Keep Team">
    
    <title>
        
            一些渗透经验 |
        
        Keep Theme
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN"};
    KEEP.theme_config = {"toc":{"enable":false,"number":false,"expand_all":false,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":false,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":false,"preload":false},"code_copy":{"enable":false,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.3"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Keep Theme
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                    
                </ul>
            </div>
            <div class="mobile">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">一些渗透经验</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Keep Team</span>
                        
                            <span class="author-label">Lv3</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2021-09-23 21:04:15
    </span>
    
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <p>渗透测试过程中的一些经验</p>
<span id="more"></span>

<h2 id="看网站是什么脚本？"><a href="#看网站是什么脚本？" class="headerlink" title="看网站是什么脚本？"></a>看网站是什么脚本？</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>网站根目录里<br> index.php<br> index.asp<br> index.aspx<br> index.jsp<br> index.do （jsp）</p>
<p>如果访问正常就说明 是属于哪一类的脚本程序</p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>利用 google.com</p>
<p>如搜索 <a class="link"   target="_blank" rel="noopener" href="http://www.xx.com/" >www.xx.com<i class="fas fa-external-link-alt"></i></a> aspx</p>
<h3 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h3><p>burpsuit爬虫</p>
<h3 id="方法四"><a href="#方法四" class="headerlink" title="方法四"></a>方法四</h3><p>目录扫描工具</p>
<h2 id="判断是否内网"><a href="#判断是否内网" class="headerlink" title="判断是否内网"></a>判断是否内网</h2><h3 id="首先要确认真实IP"><a href="#首先要确认真实IP" class="headerlink" title="首先要确认真实IP"></a>首先要确认真实IP</h3><h4 id="思路1"><a href="#思路1" class="headerlink" title="思路1"></a>思路1</h4><p>有的网站会记录网站历史IP 如站长之家之类的</p>
<h4 id="思路2"><a href="#思路2" class="headerlink" title="思路2"></a>思路2</h4><p>找PHPinfo, asp之类的文件都会暴露服务器真实IP </p>
<h4 id="思路3"><a href="#思路3" class="headerlink" title="思路3"></a>思路3</h4><p>找二级域名有的管理不会把二级域名做cdn(看运气了)</p>
<h4 id="思路4"><a href="#思路4" class="headerlink" title="思路4"></a>思路4</h4><p>有的大型网站都有自己的邮件服务器注册之后，会主动发一封邮件给我们。。。 好吧。。打开邮件的源代码。。 你就能看到服务器的真实Ip了</p>
<h3 id="知道了IP-扫下开放端口"><a href="#知道了IP-扫下开放端口" class="headerlink" title="知道了IP 扫下开放端口"></a>知道了IP 扫下开放端口</h3><p>如果只开放http端口 其他什么端口都没开的（95%为内网）</p>
<p>如果开放了http端口跟FTP端口 其他什么端口都没开 （75%为内网）</p>
<p>如果开放了http端口跟FTP端口跟数据库端口 （55%为内网）</p>
<h2 id="判断服务器类型"><a href="#判断服务器类型" class="headerlink" title="判断服务器类型"></a>判断服务器类型</h2><h3 id="第一"><a href="#第一" class="headerlink" title="第一"></a>第一</h3><p> 直接ping服务器ip，看回显信息进行判断</p>
<p>TTL=32   9X/ME</p>
<p>TTL=64   linux</p>
<p>TTL=128  2000X/XP</p>
<p>TTL=255  UNIX</p>
<h3 id="第二"><a href="#第二" class="headerlink" title="第二"></a>第二</h3><p> 利用 御剑 wwwscan ScorpioScan 等工具</p>
<h2 id="网站目录"><a href="#网站目录" class="headerlink" title="网站目录"></a>网站目录</h2><p>对于<code>http://www.zzrsks.com.cn/wsbm2013/</code>，把2013改成2012,2011 2010. 看看存不存在</p>
<p>很多傻B管理员为了方便记主这些文件 把备份文件名改成 wsbm2013.rar, wsbm2013.7z, wsbm2013.zip 放在网站程序根目录里像这样：<a class="link"   target="_blank" rel="noopener" href="http://www.zzrsks.com.cn/wsbm2013/wsbm2013.rar%EF%BC%8C%E6%88%96%E8%80%85" >http://www.zzrsks.com.cn/wsbm2013/wsbm2013.rar，或者<i class="fas fa-external-link-alt"></i></a> wsbm.rar, wsbm1.rar, wsbmwsbm.rar </p>
<p>如果没有，我们再回到根目录<a class="link"   target="_blank" rel="noopener" href="http://www.zzrsks.com.cn/%E6%8A%8A%E6%B3%A8%E6%84%8F%E5%8A%9B%E8%BD%AC%E5%90%91%E5%88%B0zzrsks%E8%BF%99%E9%87%8Chttp://www.zzrsks.com.cn/zzrsks" >http://www.zzrsks.com.cn/把注意力转向到zzrsks这里http://www.zzrsks.com.cn/zzrsks<i class="fas fa-external-link-alt"></i></a>, <a class="link"   target="_blank" rel="noopener" href="http://www.zzrsks.com.cn/webzzrsks" >http://www.zzrsks.com.cn/webzzrsks<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.zzrsks.com.cn//*/" >http://www.zzrsks.com.cn/\*\<i class="fas fa-external-link-alt"></i></a>* (管理员的QQ号 或者他的名字 如果目录没有 就试试备份文件后缀)</p>
<p><a class="link"   target="_blank" rel="noopener" href="http://www.zzrsks.com.cn/zzrsks.rar" >http://www.zzrsks.com.cn/zzrsks.rar<i class="fas fa-external-link-alt"></i></a>, <a class="link"   target="_blank" rel="noopener" href="http://www.zzrsks.com.cn/webzzrsks.rar" >http://www.zzrsks.com.cn/webzzrsks.rar<i class="fas fa-external-link-alt"></i></a> </p>
<h2 id="检测目标站"><a href="#检测目标站" class="headerlink" title="检测目标站"></a>检测目标站</h2><p>我们知道了他开放3个http端口80, 8081, 8083</p>
<h3 id="先从默认80端口安全检测"><a href="#先从默认80端口安全检测" class="headerlink" title="先从默认80端口安全检测"></a>先从默认80端口安全检测</h3><h4 id="检测SQL漏洞"><a href="#检测SQL漏洞" class="headerlink" title="检测SQL漏洞"></a>检测SQL漏洞</h4><p>经典注入 静态注入 登陆框注入 搜索框注入 等</p>
<h4 id="检测越权漏洞"><a href="#检测越权漏洞" class="headerlink" title="检测越权漏洞"></a>检测越权漏洞</h4><p>文件拦截跳转 后台文件直接打开直接添加管理员 等</p>
<h4 id="检测XSS漏洞"><a href="#检测XSS漏洞" class="headerlink" title="检测XSS漏洞"></a>检测XSS漏洞</h4><p>先来个反射型XSS，看看过滤严不严，如果过滤了什么符号，就想办法绕过去来XSS跨站等备份，或者直接拿shell。PS：如果不精通XSS的朋友们 就盲打吧= = 看看收获点什么</p>
<h4 id="检测上传漏洞"><a href="#检测上传漏洞" class="headerlink" title="检测上传漏洞"></a>检测上传漏洞</h4><p>注册会员啊，扫目录看看存不存在FCK 或者 eWebEditor上传页面，如果有eWebEditor上传页面的话，就利用对应的0day进行一次上传</p>
<h4 id="测试其他漏洞"><a href="#测试其他漏洞" class="headerlink" title="测试其他漏洞"></a>测试其他漏洞</h4><p>比如用google搜索敏感信息，比如txt, bak什么的，我记得我就有1次利用GOOGLE爆了目标站的root密码</p>
<h3 id="如果失败就换下一个端口"><a href="#如果失败就换下一个端口" class="headerlink" title="如果失败就换下一个端口"></a>如果失败就换下一个端口</h3><p>假设为8081端口，<a class="link"   target="_blank" rel="noopener" href="http://www.xx.com:8081/" >www.xx.com:8081/<i class="fas fa-external-link-alt"></i></a><br>然后我们用程序指纹来扫是属于哪里的cms，到是哪里的cms后，进行0day exp 利用。</p>
<h4 id="如果扫不出来-怎么办呢？"><a href="#如果扫不出来-怎么办呢？" class="headerlink" title="如果扫不出来 怎么办呢？"></a>如果扫不出来 怎么办呢？</h4><p>没关系，还可以试试另外一种方法。</p>
<p>打开网站后随便打开一个网站程序文件，如：<a class="link"   target="_blank" rel="noopener" href="http://www.x.com/xindong/kkks.aspx" >www.x.com/xindong/kkks.aspx<i class="fas fa-external-link-alt"></i></a><br>那么在google那里 搜索一下（利用google 语句 如：intitle:   inurl：  intext: Filetype: Site：等等的语句）xindong/kkks.aspx   文件</p>
<blockquote>
<p>site:xx.com inurl:admin</p>
<p>site:xx.com intext:用户名</p>
</blockquote>
<p>然后查找敏感信息  PS：运气好 还可以找到这程序的下载源码</p>
<p>我们搜索了从google那里发现了一个公司站 ，目录跟文件跟目标站是一模一样的，我们也可以拿下那个公司站，拿下后把源码打包，然后挖掘0day</p>
<h4 id="在google搜不到怎么办？"><a href="#在google搜不到怎么办？" class="headerlink" title="在google搜不到怎么办？"></a>在google搜不到怎么办？</h4><p>第一：这程序是私人写的 没公布<br>解决方法：只能慢慢安全检测了</p>
<p>第二：这程序目录 文件夹名 文件名 被改了<br>解决方法：查看原代码 搜索一段代码，或者利用google搜索他的CSS、JS文件 </p>
<h3 id="如果端口都没有漏洞"><a href="#如果端口都没有漏洞" class="headerlink" title="如果端口都没有漏洞"></a>如果端口都没有漏洞</h3><p>只能爆破了 组合好强大的字典 进行爆破 http后台 FTP MYSQL MSSQL 等等端口</p>
<h3 id="傻瓜式渗透"><a href="#傻瓜式渗透" class="headerlink" title="傻瓜式渗透"></a>傻瓜式渗透</h3><p>比如<a class="link"   target="_blank" rel="noopener" href="http://www.x.com的一个站,先爬行得到他的目录/" >www.x.com的一个站，先爬行得到他的目录<i class="fas fa-external-link-alt"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/1" >www.x.com/1<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/2" >www.x.com/2<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/3" >www.x.com/3<i class="fas fa-external-link-alt"></i></a><br>先记录下来，然后把你组合的强大字典 ASPX ASP PHP JSP 4类程序，全部拉在一起，一起扫描</p>
<p>先扫描网站根目录，再次得到一些你不知道的目录</p>
<p><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/1mn" >www.x.com/1mn<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/xindong" >www.x.com/xindong<i class="fas fa-external-link-alt"></i></a></p>
<p>然后又记录下来，然后跟爬行得出的目录放在一起</p>
<p><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/1" >www.x.com/1<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/2" >www.x.com/2<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/3" >www.x.com/3<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/1mn" >www.x.com/1mn<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/xindong" >www.x.com/xindong<i class="fas fa-external-link-alt"></i></a></p>
<p>然后把重复的内容去掉，然后放在进去扫描目录，然后又得出新目录跟文件<br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/1/xss/" >www.x.com/1/xss/<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/2/qqww/" >www.x.com/2/qqww/<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/3/asdasd/" >www.x.com/3/asdasd/<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/1mn/ssaq/" >www.x.com/1mn/ssaq/<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/xindong/admin.asp" >www.x.com/xindong/admin.asp<i class="fas fa-external-link-alt"></i></a><br>然后又把<br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/1/xss/" >www.x.com/1/xss/<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/2/qqww/" >www.x.com/2/qqww/<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/3/asdasd/" >www.x.com/3/asdasd/<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="http://www.x.com/1mn/ssaq/" >www.x.com/1mn/ssaq/<i class="fas fa-external-link-alt"></i></a><br>再次进行扫描，相信大家都理解了吧</p>
<blockquote>
<p>之前利用傻瓜式 丢在服务器里跑 结果发现个备份文件，下载打开一看发现是sa用户跟密码<br>PS：如果发现密码不对，可以用这个密码，去试试登录FTP、服务器、后台什么的，或者再次利用这个密码来组合密码字典来爆破</p>
</blockquote>
<h2 id="网站无能为力，尝试C段"><a href="#网站无能为力，尝试C段" class="headerlink" title="网站无能为力，尝试C段"></a>网站无能为力，尝试C段</h2><h3 id="怎么找内网C段"><a href="#怎么找内网C段" class="headerlink" title="怎么找内网C段"></a>怎么找内网C段</h3><p>第一 通过二级域名来渗透（一般都是同网关的 我试过）</p>
<p>第二 用御剑扫描C段 比如网站IP是*.*.4.156，而网站的标题是：学籍管理，那么就扫描*.*.3.1 ~ *.*.5.254 的80 81 8080 8081端口，看哪个开放，然后分析，看哪个标题比较敏感，比如内部登录系统或者教师登录 什么的，然后拿下他的shell</p>
<p>如果支持命令，先不要急着提权，先看看同不同网关，直接在shell cmd命令里扫描整个内网端口 <code>netstat -an | find &quot; &quot;</code></p>
<p>主要扫3个目标站已开的端口 80 8081 8083，如果某个IP 这3个端口都开了 80%同网关，然后进去就可以内网渗透了</p>
<p>如果内网渗透不成功 就内网嗅探</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>收集信息→目标站渗透→开放端口渗透→旁站渗透→C段渗透</p>

        </div>

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2021/09/23/php%E7%88%86%E8%B7%AF%E5%BE%84/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">php爆路径</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/09/23/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BB%88%E7%AB%AF%E6%9C%BA%E7%BB%95%E8%BF%87/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">有趣的终端机绕过</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>&nbsp;-&nbsp;
            
            2021&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Keep Team</a>
        </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.3</a>
        </div>
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>








<div class="post-scripts">
    
</div>



</body>
</html>
