<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Docker基础, ezy&#39;s blog">
    <meta name="description" content="关于Docker的一些基础知识及部署命令
documents and libraryhttps://docs.docker.com/
https://hub.docker.com/
installDocker needs the versi">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Docker基础 | ezy&#39;s blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"></head>



   <style>
    body{
       background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
       background-repeat:no-repeat;
       background-size: 100% 100%;
       background-attachment:fixed;
    }
</style>



<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">ezy&#39;s blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">ezy&#39;s blog</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/14.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Docker基础</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/docker/">
                                <span class="chip bg-color">docker</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Learning-Notes/" class="post-category">
                                Learning_Notes
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-07-29
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        
        <!-- 代码块折行 -->
        <style type="text/css">
            code[class*="language-"], pre[class*="language-"] { white-space: pre-wrap !important; }
        </style>
        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>关于Docker的一些基础知识及部署命令</p>
<h2 id="documents-and-library"><a href="#documents-and-library" class="headerlink" title="documents and library"></a>documents and library</h2><p><code>https://docs.docker.com/</code></p>
<p><code>https://hub.docker.com/</code></p>
<h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><p>Docker needs the version of CentOS kernel &gt; <code>3.10</code></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[ezy@localhost ~]$ uname -r
3.10.0-693.el7.x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost ezy]# yum install -y yum-utils device-mapper-persistent-data lvm2
[root@localhost ezy]# yum-config-manager --add-repo https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo
[root@localhost ezy]# yum install docker-ce docker-ce-cli containerd.io
[root@localhost ezy]# systemctl start docker # start docker
[root@localhost ezy]# systemctl enable docker #设置开机启动
Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;docker.service to &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;docker.service.
[root@localhost ezy]# docker version
Client: Docker Engine - Community
 Version:           19.03.13
 API version:       1.40
 Go version:        go1.13.15
 Git commit:        4484c46d9d
 Built:             Wed Sep 16 17:03:45 2020
 OS&#x2F;Arch:           linux&#x2F;amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          19.03.13
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.13.15
  Git commit:       4484c46d9d
  Built:            Wed Sep 16 17:02:21 2020
  OS&#x2F;Arch:          linux&#x2F;amd64
  Experimental:     false
 containerd:
  Version:          1.3.7
  GitCommit:        8fba4e9a7d01810a393d5d25a3621dc101981175
 runc:
  Version:          1.0.0-rc10
  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd
 docker-init:
  Version:          0.18.0
  GitCommit:        fec3683<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Docker-HelloWorld-test"><a href="#Docker-HelloWorld-test" class="headerlink" title="Docker HelloWorld test"></a>Docker HelloWorld test</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost ezy]# docker run hello-world
Unable to find image &#39;hello-world:latest&#39; locally
latest: Pulling from library&#x2F;hello-world
0e03bdcc26d7: Pull complete 
Digest: sha256:8c5aeeb6a5f3ba4883347d3747a7249f491766ca1caa47e5da5dfcf6b9b717c0
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https:&#x2F;&#x2F;hub.docker.com&#x2F;

For more examples and ideas, visit:
 https:&#x2F;&#x2F;docs.docker.com&#x2F;get-started&#x2F;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="config-Aliyun-images-repositories-to-speed-up-downloading-images"><a href="#config-Aliyun-images-repositories-to-speed-up-downloading-images" class="headerlink" title="config Aliyun images repositories(to speed up downloading images)"></a>config Aliyun images repositories(to speed up downloading images)</h2><ol>
<li>Through logging into the Aliyun official website, enter into the container image service.</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/ezy0812/CDN/docker/docker-f1.png" alt="image-20201111221517543"></p>
<ol start="2">
<li>create <code>daemon.json</code> file in the <code>/etc/docker</code>. </li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/ezy0812/CDN/docker/docker-f2.png" alt="image-20201111222029063"></p>
<ol start="3">
<li><p>reboot daemon</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# systemctl daemon-reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>reboot docker service</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# systemctl restart docker<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>test</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker info<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="https://cdn.jsdelivr.net/gh/ezy0812/CDN/docker/docker-f3.png" alt="image-20201111222434755"></p>
</li>
</ol>
<h2 id="Basic-commands"><a href="#Basic-commands" class="headerlink" title="Basic commands"></a>Basic commands</h2><h4 id="start-stop-restart-docker"><a href="#start-stop-restart-docker" class="headerlink" title="start, stop, restart docker"></a>start, stop, restart docker</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# systemctl start docker
[root@localhost docker]# systemctl stop docker
[root@localhost docker]# systemctl restart docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h4 id="view-information"><a href="#view-information" class="headerlink" title="view information"></a>view information</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker info<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="check-help-documents"><a href="#check-help-documents" class="headerlink" title="check help documents"></a>check help documents</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker --help<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="check-version"><a href="#check-version" class="headerlink" title="check version"></a>check version</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="list-all-the-images-in-the-local-machine"><a href="#list-all-the-images-in-the-local-machine" class="headerlink" title="list all the images in the local machine"></a>list all the images in the local machine</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker images<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="search-images-on-line"><a href="#search-images-on-line" class="headerlink" title="search images on line"></a>search images on line</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker search tomcat<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="download-images"><a href="#download-images" class="headerlink" title="download images"></a>download images</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker pull nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><code>docker pull image_name:[tag]</code> </p>
<p>It will download the latest version if doesn’t append <code>tag</code>. </p>
<h4 id="delete-images"><a href="#delete-images" class="headerlink" title="delete images"></a>delete images</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker rmi redis:4.0.14<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>add <code>-f</code> can stop the executing image and delete it.</p>
<p><code>docker rmi -f redis:4.0.14</code></p>
<h4 id="create-and-start-container"><a href="#create-and-start-container" class="headerlink" title="create and start container"></a>create and start container</h4><p><code>docker run [options] image [command] [args]</code></p>
<p>-i: run the container in interactive mode</p>
<p>-t: reassigned a pseudo-input terminal for the container</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker run -it --name mycentos1 7e6257
[root@da03311a5f05 &#x2F;]# ls
anaconda-post.log  dev  home  lib64  mnt  proc  run   srv  tmp  var
bin                etc  lib   media  opt  root  sbin  sys  usr
[root@da03311a5f05 &#x2F;]# exit
exit
[root@localhost docker]# docker run -it --name mycentos2 7e6257
[root@1be4b28c607a &#x2F;]# ls
anaconda-post.log  dev  home  lib64  mnt  proc  run   srv  tmp  var
bin                etc  lib   media  opt  root  sbin  sys  usr
[root@1be4b28c607a &#x2F;]# exit
exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="list-the-running-containers"><a href="#list-the-running-containers" class="headerlink" title="list the running containers"></a>list the running containers</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost ezy]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
e23da60755cb        7e6257              &quot;&#x2F;bin&#x2F;bash&quot;         30 seconds ago      Up 28 seconds                           mycentos3
[root@localhost ezy]# docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
e23da60755cb        7e6257              &quot;&#x2F;bin&#x2F;bash&quot;         2 minutes ago       Up 2 minutes                                   mycentos3
1be4b28c607a        7e6257              &quot;&#x2F;bin&#x2F;bash&quot;         4 minutes ago       Exited (0) 4 minutes ago                       mycentos2
da03311a5f05        7e6257              &quot;&#x2F;bin&#x2F;bash&quot;         4 minutes ago       Exited (0) 4 minutes ago                       mycentos1
79dcf3b46b21        hello-world         &quot;&#x2F;hello&quot;            3 hours ago         Exited (0) 3 hours ago                         nervous_driscoll
9644f1edbca7        hello-world         &quot;&#x2F;hello&quot;            3 hours ago         Exited (0) 3 hours ago                         gracious_roentgen<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>list the 2 containers that were recently created</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost ezy]# docker ps -n 2
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
e23da60755cb        7e6257              &quot;&#x2F;bin&#x2F;bash&quot;         3 minutes ago       Up 3 minutes                                   mycentos3
1be4b28c607a        7e6257              &quot;&#x2F;bin&#x2F;bash&quot;         5 minutes ago       Exited (0) 5 minutes ago                       mycentos2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="exit-the-container"><a href="#exit-the-container" class="headerlink" title="exit the container"></a>exit the container</h4><p><code>exit</code> stop and exit</p>
<p> <code>Ctrl+P+Q</code> not stop and exit</p>
<h4 id="enter-into-the-container"><a href="#enter-into-the-container" class="headerlink" title="enter into the container"></a>enter into the container</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
e23da60755cb        7e6257              &quot;&#x2F;bin&#x2F;bash&quot;         8 minutes ago       Up 8 minutes                            mycentos3
[root@localhost docker]# docker attach e23da
[root@e23da60755cb &#x2F;]# 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="start-the-exited-container"><a href="#start-the-exited-container" class="headerlink" title="start the exited container"></a>start the exited container</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
1be4b28c607a        7e6257              &quot;&#x2F;bin&#x2F;bash&quot;         13 minutes ago      Exited (0) 13 minutes ago                       mycentos2
[root@localhost docker]# docker start 1be4b28c607a
1be4b28c607a
[root@localhost docker]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
1be4b28c607a        7e6257              &quot;&#x2F;bin&#x2F;bash&quot;         14 minutes ago      Up 2 seconds                            mycentos2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="restart-the-container"><a href="#restart-the-container" class="headerlink" title="restart the container"></a>restart the container</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker restart 1be4b28c607a
1be4b28c607a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h4 id="stop-the-container"><a href="#stop-the-container" class="headerlink" title="stop the container"></a>stop the container</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker stop 1be4b28c607a
1be4b28c607a
[root@localhost docker]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="delete-the-container"><a href="#delete-the-container" class="headerlink" title="delete the container"></a>delete the container</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker rm 1be4b28c607a
1be4b28c607a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>can add <code>-f</code> to delete forcefully </p>
<h2 id="Advanced-commands"><a href="#Advanced-commands" class="headerlink" title="Advanced commands"></a>Advanced commands</h2><h4 id="create-and-start-the-container-in-a-daemon-manner"><a href="#create-and-start-the-container-in-a-daemon-manner" class="headerlink" title="create and start the container in a daemon manner"></a>create and start the container in a daemon manner</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker run -di --name mycentos01 7e6257c9f8d8
1a0d0496deffaa59b6e456db6a36b958cdc541fadf0d732291d6a1ab30bc2507
[root@localhost docker]# <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>It doesn’t enter the container after startup.</p>
<h4 id="operate-the-container-directly-and-return-to-the-host-terminal-after-execution"><a href="#operate-the-container-directly-and-return-to-the-host-terminal-after-execution" class="headerlink" title="operate the container directly and return to the host terminal after execution"></a>operate the container directly and return to the host terminal after execution</h4><p>For example, start the application in the container, such as nginx, tomcat, etc.</p>
<p><code>docker exec -it ID command</code></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker exec -it 1a0d04 ls -l &#x2F;sys
total 0
drwxr-xr-x.   2 root root  0 Nov 11 15:30 block
drwxr-xr-x.  28 root root  0 Nov 11 15:30 bus
drwxr-xr-x.  53 root root  0 Nov 11 15:30 class
drwxr-xr-x.   4 root root  0 Nov 11 15:30 dev
drwxr-xr-x.  12 root root  0 Nov 11 15:30 devices
drwxrwxrwt.   2 root root 40 Nov 11 15:22 firmware
drwxr-xr-x.   7 root root  0 Nov 11 15:22 fs
drwxr-xr-x.   2 root root  0 Nov 11 15:30 hypervisor
drwxr-xr-x.   9 root root  0 Nov 11 15:30 kernel
drwxr-xr-x. 185 root root  0 Nov 11 15:30 module
drwxr-xr-x.   2 root root  0 Nov 11 15:30 power<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="check-the-logs-of-container"><a href="#check-the-logs-of-container" class="headerlink" title="check the logs of container"></a>check the logs of container</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker logs 1a0d04<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="check-the-processes-of-container"><a href="#check-the-processes-of-container" class="headerlink" title="check the processes of container"></a>check the processes of container</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker top 1a0d04
UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD
root                81635               81619               0                   07:22               ?                   00:00:00            &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h4 id="copy-the-files-between-host-machine-and-container"><a href="#copy-the-files-between-host-machine-and-container" class="headerlink" title="copy the files between host machine and container"></a>copy the files between host machine and container</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker cp &#x2F;etc&#x2F;docker&#x2F;key.json 1a0d04:&#x2F;tmp
[root@localhost docker]# docker exec -it 1a0d04 ls -l &#x2F;tmp
total 8
-rw-------. 1 root root 244 Nov 11 12:22 key.json
[root@localhost docker]# docker cp 1a0d04:&#x2F;tmp&#x2F;key.json &#x2F;home
[root@localhost docker]# ls &#x2F;home
data  ezy  key.json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="port-mapping-between-docker-and-host"><a href="#port-mapping-between-docker-and-host" class="headerlink" title="port mapping between docker and host"></a>port mapping between docker and host</h2><p><code>docker run -it -p host:docker imageID</code></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker run -it -p 8888:8080 e3a3935<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="submit-image"><a href="#submit-image" class="headerlink" title="submit image"></a>submit image</h2><p>save the changes and configuration in the docker and commit it into new image in the local machine</p>
<p><code>docker commit -a=&#39;author&#39; -m=&#39;comment&#39; ID newImageName</code></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker commit -a &#39;ezy&#39; -m &#39;ezy01&#39; e39 ezy0812&#x2F;centos7:1.0
sha256:59c3e732e8139c33cc86a2c19d3030b189ea8fd8b92c5b0cf0649a034acbfe3d
[root@localhost docker]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ezy0812&#x2F;centos7     1.0                 59c3e732e813        3 seconds ago       203MB
centos              7                   7e6257c9f8d8        3 months ago        203MB
hello-world         latest              bf756fb1ae65        10 months ago       13.3kB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="push-the-self-made-images-to-the-hub-remote-server"><a href="#push-the-self-made-images-to-the-hub-remote-server" class="headerlink" title="push the self-made images to the hub remote server"></a>push the self-made images to the hub remote server</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker login
[root@localhost docker]# docker push ezy0812&#x2F;centos7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="push-the-self-made-images-to-the-Aliyun-remote-server"><a href="#push-the-self-made-images-to-the-Aliyun-remote-server" class="headerlink" title="push the self-made images to the Aliyun remote server"></a>push the self-made images to the Aliyun remote server</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker login --username&#x3D;ezy_8 registry.cn-hangzhou.aliyuncs.com
[root@localhost docker]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ezy0812&#x2F;centos7     1.0                 59c3e732e813        12 minutes ago      203MB
centos              7                   7e6257c9f8d8        3 months ago        203MB
hello-world         latest              bf756fb1ae65        10 months ago       13.3kB
[root@localhost docker]# docker tag 59c3e732e813 registry.cn-hangzhou.aliyuncs.com&#x2F;ezy0812&#x2F;centos7:1.0.1
[root@localhost docker]# docker images
REPOSITORY                                          TAG                 IMAGE ID            CREATED             SIZE
ezy0812&#x2F;centos7                                     1.0                 59c3e732e813        13 minutes ago      203MB
registry.cn-hangzhou.aliyuncs.com&#x2F;ezy0812&#x2F;centos7   1.0.1               59c3e732e813        13 minutes ago      203MB
centos                                              7                   7e6257c9f8d8        3 months ago        203MB
hello-world                                         latest              bf756fb1ae65        10 months ago       13.3kB
[root@localhost docker]# docker push registry.cn-hangzhou.aliyuncs.com&#x2F;ezy0812&#x2F;centos7:1.0.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="docker-directory-mount"><a href="#docker-directory-mount" class="headerlink" title="docker directory mount"></a>docker directory mount</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker run -it -v &#x2F;home&#x2F;hdata:&#x2F;cdata 7e6257
[root@localhost docker]# docker run -it -v &#x2F;home&#x2F;hdata:&#x2F;cdata -v &#x2F;home&#x2F;hdata2:&#x2F;cdata2 7e6257<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>If the mount of multiple directories has permissions denied, then add <code>--privileged=true</code></p>
<p>make the mount directory read-only</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker run -it -v &#x2F;home&#x2F;hdata:&#x2F;cdata:ro 7e6257<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="docker-migration-and-backup"><a href="#docker-migration-and-backup" class="headerlink" title="docker migration and backup"></a>docker migration and backup</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker save -o mytomcat7.7.tar ezy0812&#x2F;tomcat:1.0 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="Recover-on-other-machine"><a href="#Recover-on-other-machine" class="headerlink" title="Recover on other machine"></a>Recover on other machine</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost docker]# docker load -i mytomcat7.7.tar<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h2><table>
<thead>
<tr>
<th>FROM image_name:tag</th>
<th>Define which base image is used to start the build process</th>
</tr>
</thead>
<tbody><tr>
<td>MAINTAINER user_info</td>
<td>Declare the image maintainer information</td>
</tr>
<tr>
<td>LABEL key value</td>
<td>image description meta information</td>
</tr>
<tr>
<td>ENV key value</td>
<td>set environment variable</td>
</tr>
<tr>
<td>RUN command</td>
<td>The commands to run when building the container</td>
</tr>
<tr>
<td>WORKDIR path_dir</td>
<td>set the working directory when the terminal is logged in by default</td>
</tr>
<tr>
<td>EXPOSE port</td>
<td>the port the current container is exposed to</td>
</tr>
<tr>
<td>ADD source_dir/file dest_dir/file</td>
<td>copy the file of host machine to the container, if it’s a compressed file, it can unzip after copying automatically</td>
</tr>
<tr>
<td>COPY source_dir/file dest_dir/file</td>
<td>similar to <code>ADD</code>, but if it’s a compressed file, it cannot unzip</td>
</tr>
<tr>
<td>VOLUME</td>
<td>create a mount point that can be mounted from a local host or other container, typically to hold databases, data that needs to be held, etc.</td>
</tr>
<tr>
<td>CMD</td>
<td>specify the command to run when the container starts, if there are multiple commands, then the last one work</td>
</tr>
<tr>
<td>ENTRYPOINT</td>
<td>specify the command to run when the container starts</td>
</tr>
<tr>
<td>ONBUILD</td>
<td>the command to run when building an inherited DockerFile. The ONBUILD of the parent image inherits from the parent image in the quilt image is triggered</td>
</tr>
</tbody></table>
<h3 id="1-write-the-DockerFile"><a href="#1-write-the-DockerFile" class="headerlink" title="1. write the DockerFile"></a>1. write the DockerFile</h3><p><code>mycentosDockerFile</code></p>
<pre class="line-numbers language-docker" data-language="docker"><code class="language-docker"><span class="token instruction"><span class="token keyword">FROM</span> centos</span>
<span class="token instruction"><span class="token keyword">MAINTAINER</span> ezy&lt;ezy0812@163.com></span>
<span class="token instruction"><span class="token keyword">LABEL</span> name=<span class="token string">"ezy0812 CentOS image"</span> build-date=<span class="token string">"20201112"</span></span>

<span class="token instruction"><span class="token keyword">ENV</span> WORKPATH /home/</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> <span class="token variable">$WORKPATH</span></span>
<span class="token instruction"><span class="token keyword">RUN</span> yum -y install net-tools</span>
<span class="token instruction"><span class="token keyword">RUN</span> yum -y install vim</span>

<span class="token instruction"><span class="token keyword">EXPOSE</span> 80</span>
<span class="token instruction"><span class="token keyword">CMD</span> /bin/bash</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-build"><a href="#2-build" class="headerlink" title="2. build"></a>2. build</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost home]# docker build -f mycentosDockerFile -t ezy0812&#x2F;centos7:v1 .<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>pay attention to the point in the end, it’s the grammar.</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">ezy</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://ezy0812.github.io/2021/07/29/Docker%E5%9F%BA%E7%A1%80/">https://ezy0812.github.io/2021/07/29/Docker%E5%9F%BA%E7%A1%80/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">ezy</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/docker/">
                                    <span class="chip bg-color">docker</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/08/20/python-spider2/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/12.jpg" class="responsive-img" alt="python-spider2">
                        
                        <span class="card-title">python-spider2</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-08-20
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Learning-Notes/" class="post-category">
                                    Learning_Notes
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/python/">
                        <span class="chip bg-color">python</span>
                    </a>
                    
                    <a href="/tags/spider/">
                        <span class="chip bg-color">spider</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/05/02/python-spider/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/2.jpg" class="responsive-img" alt="python-spider">
                        
                        <span class="card-title">python-spider</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-05-02
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Learning-Notes/" class="post-category">
                                    Learning_Notes
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/python/">
                        <span class="chip bg-color">python</span>
                    </a>
                    
                    <a href="/tags/spider/">
                        <span class="chip bg-color">spider</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2021</span>
            
            <a href="/about" target="_blank">ezy</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2019";
                        var startMonth = "6";
                        var startDate = "28";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/ezy0812" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>















</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
